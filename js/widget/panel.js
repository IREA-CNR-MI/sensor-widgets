define("widget/panel",["sos-data-access","locale-date","widget-common"],function(e,t,r){"use strict";var n=['<div class="panel widget">',"<h2></h2>","<h3>Loading...</h3>",'<dl class="dl-horizontal"></dl>','<div><span class="footnote"></span></div>',"</div>"].join("");return{inputs:r.inputs.concat(["feature","properties","refresh_interval","title"]),optional_inputs:r.optional_inputs,preferredSizes:[{w:400,h:400}],init:function(a,i){function o(e){if(!e.length)return void(d.innerHTML="(no data)");var r=new Date(Math.max.apply(Math,e.map(function(e){return e.time})));e.sort(function(e,t){return e.property.localeCompare(t.property)}),d.innerHTML=t.display(r);var n="";for(var a in e){var i=e[a];n+="<dt>"+i.property+"</dt>",n+=i.time.getTime()==r.getTime()?"<dd>"+i.value+" "+i.uom+"</dd>":"<dd class='outdated'>"+i.value+" "+i.uom+"* <span>*("+t.display(i.time)+")</span></dd>"}l.innerHTML=n}i.innerHTML=n,i.querySelector("h2").innerHTML=a.title;var d=i.querySelector("h3"),l=i.querySelector("dl");r.init(a,i);var s=e(a,o),p=setInterval(s.read,1e3*a.refresh_interval);return s.read(),{destroy:function(){clearInterval(p)}}}}});