define(["SOS","text!svg/gauge.svg"],function(e,t){var r=["service","offering","feature","property","refresh_interval"];return{inputs:r,init:function(r,n){function o(){e.getObservation(r.offering,[r.feature],[r.property],"latest",u)}function u(t){if(1==t.length&&"%"==t[0].result.uom&&"number"==typeof t[0].result.value){{var n=t[0],o=(n.featureOfInterest.name.value,n.resultTime,n.result.value);n.procedure}document.getElementById("value").innerHTML=o+" %";var u=2.7*o;i.setAttribute("transform","rotate("+u+", 365.396, 495)"),e.describeSensor(n.procedure,function(e){var t=e.hasOwnProperty("ProcessModel")?e.ProcessModel.outputs.OutputList.output:e.System.outputs.OutputList.output;for(var n in t){var o=t[n];o.Quantity.definition==r.property&&(document.getElementById("title").innerHTML=o.name)}})}else console.error("Gauge Widget Error - Got an invalid observation from the SOS service")}n.innerHTML='<div class="widget">'+t;var i=document.getElementById("arrow");e.setUrl(r.service),setInterval(o,1e3*r.refresh_interval),o()}}});