define(["SOS","highcharts-more"],function(t){var e=["title","subtitle","service","offering","feature","properties","refresh_interval","time_start","time_end"],r=["&gt; 10 m/s","8-10 m/s","6-8 m/s","4-6 m/s","2-4 m/s","0-2 m/s"];return{inputs:e,init:function(e,i){function n(){var r=a(e.properties)?e.properties:JSON.parse(e.properties),i=e.time_start&&e.time_end?[e.time_start,e.time_end]:null;t.getObservation(e.offering,[e.feature],r,i,s)}function a(t){return"[object Array]"===Object.prototype.toString.call(t)}function s(t){var e=[];for(var r in t){var i=t[r],n=new Date(i.resultTime).getTime(),a="deg"==i.result.uom?1:0,s=i.result.value;e[n]||(e[n]=[]),e[n][a]=s}for(var l=[];l.length<6;){for(var u=[];u.push(null)<16;);l.push(u)}var c=0;for(r in e){var f=e[r];if(2==f.length){var m=5-Math.min(Math.floor(f[0]/2),5),h=Math.round(f[1]/22.5)%16;l[m][h]?l[m][h]++:l[m][h]=1,c++}}for(r in l)for(var p in l[r])l[r][p]=100*l[r][p]/c;o(l)}function o(t){var n=[];for(var a in r){var s=0;for(var o in t[a])s+=t[a][o];n.push({name:r[a]+" ("+Math.round(s)+"%)",data:t[a]})}new Highcharts.Chart({chart:{type:"column",polar:!0,renderTo:i},title:{text:e.title},subtitle:{text:e.subtitle},pane:{size:"85%"},legend:{align:"right",verticalAlign:"top",y:100,layout:"vertical"},xAxis:{tickmarkPlacement:"on",categories:["N","NNE","NE","ENE","E","ESE","SE","SSE","S","SSW","SW","WSW","W","WNW","NW","NNW"]},yAxis:{min:0,endOnTick:!1,showLastLabel:!0,labels:{formatter:function(){return this.value+" %"}}},tooltip:{formatter:function(){return'<span style="color:'+this.series.color+'">‚óè</span> '+this.series.name+": <b>"+Highcharts.numberFormat(this.y,1)+" %</b><br/>"}},plotOptions:{series:{stacking:"normal",shadow:!1,groupPadding:0,pointPlacement:"on"}},colors:["#BD0BC9","#C9170B","#C9760B","#BDC90B","#0BC917","#0BBDC9"],series:n})}t.setUrl(e.service),setInterval(n,1e3*e.refresh_interval),n()}}});