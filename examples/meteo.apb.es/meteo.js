define("meteo",["i18n","SensorWidget","locale-date","jquery","bootstrap"],function(e,r,t,o){"use strict";t.utc(!1),t.locale("es"),e.setLang("ca");var n={service:function(){return"http://sensors.portdebarcelona.cat/sos/json"},offering:function(e){return"http://sensors.portdebarcelona.cat/def/weather/offerings#"+e},feature:function(e){return"http://sensors.portdebarcelona.cat/def/weather/features#"+e},property:function(e){return"http://sensors.portdebarcelona.cat/def/weather/properties#"+e}},i=new Date,a=new Date(i.getTime()-72e5),s=new Date(i.getTime()-108e5),p=new Date(i.getTime()-612e5),f=new Date(i.getTime()-864e5),l=o(".active a").text();switch(l){case"Sirena":new r("compass",{service:n.service(),offering:n.offering("1m"),feature:n.feature("02"),property:n.property("31"),refresh_interval:15},document.querySelector(".sirena .compass")),new r("thermometer",{service:n.service(),offering:n.offering("1m"),feature:n.feature("02"),property:n.property("32"),refresh_interval:15},document.querySelector(".sirena .meteo-thermometer")),new r("timechart",{title:"Velocitat Vent",service:n.service(),offering:n.offering("10m"),features:[n.feature("02")],properties:[n.property("30M"),n.property("30")],time_start:f.toISOString().substring(0,19)+"Z",time_end:i.toISOString().substring(0,19)+"Z"},document.querySelector(".sirena .timechart")),new r("windrose",{title:"Rosa vents últimes 3h",subtitle:"Sirena, mostres minutals",service:n.service(),offering:n.offering("1m"),feature:n.feature("02"),properties:[n.property("30"),n.property("31")],time_start:s.toISOString().substring(0,19)+"Z",time_end:i.toISOString().substring(0,19)+"Z",refresh_interval:120},document.querySelector(".sirena .windrose")),new r("table",{title:"Taula de dades",service:n.service(),offering:n.offering("30m"),feature:n.feature("02"),properties:[n.property("30"),n.property("30M"),n.property("31"),n.property("32"),n.property("33"),n.property("35"),n.property("36"),n.property("34")],time_start:p.toISOString().substring(0,19)+"Z",time_end:i.toISOString().substring(0,19)+"Z"},document.querySelector(".sirena .tablex"));break;case"XMVQA":new r("compass",{title:"Sirena",service:n.service(),offering:n.offering("1m"),feature:n.feature("02"),property:n.property("31"),refresh_interval:15},document.querySelector(".xmvqa .left .compass")),new r("panel",{title:"Dades minutals",service:n.service(),offering:n.offering("1m"),feature:n.feature("02"),properties:[n.property("30"),n.property("31"),n.property("32"),n.property("33"),n.property("34"),n.property("35"),n.property("36")],refresh_interval:15},document.querySelector(".xmvqa .left .panel-10m")),new r("timechart",{title:"Velocitat Vent",service:n.service(),offering:n.offering("10m"),features:[n.feature("02")],properties:[n.property("30")],time_start:a.toISOString().substring(0,19)+"Z",time_end:i.toISOString().substring(0,19)+"Z"},document.querySelector(".xmvqa .left .timechart")),new r("panel",{title:"Darrers valors 30-minutals",service:n.service(),offering:n.offering("30m"),feature:n.feature("02"),properties:[n.property("30"),n.property("31"),n.property("32"),n.property("33"),n.property("34"),n.property("35"),n.property("36")],refresh_interval:120},document.querySelector(".xmvqa .left .panel-30m"));var c={"01":"Dispensari",P4:"Dic Sud","03":"Adossat",P6:"Contradic",P3:"Unitat Mobil",P5:"Dàrsena Sud B",10:"ZAL2"};for(var u in c)new r("compass",{title:c[u],service:n.service(),offering:n.offering("1m"),feature:n.feature(u),property:n.property("31"),refresh_interval:15},document.querySelector(".xmvqa .x"+u+" .compass")),new r("panel",{title:"Dades minutals",service:n.service(),offering:n.offering("1m"),feature:n.feature(u),properties:[n.property("30"),n.property("31"),n.property("32"),n.property("33"),n.property("34"),n.property("35"),n.property("36")],refresh_interval:15},document.querySelector(".xmvqa .x"+u+" .panel"));break;case"Torre Control":new r("map",{service:n.service(),offering:n.offering("30m"),features:[n.feature("P4")],properties:[],permanent_tooltips:!0,max_initial_zoom:12},document.querySelector(".torrecontrol .p4 .map")),new r("compass",{service:n.service(),offering:n.offering("1m"),feature:n.feature("P4"),property:n.property("31"),refresh_interval:15},document.querySelector(".torrecontrol .p4 .compass")),new r("panel",{title:"Dades minutals",service:n.service(),offering:n.offering("1m"),feature:n.feature("P4"),properties:[n.property("31"),n.property("30")],refresh_interval:15},document.querySelector(".torrecontrol .p4 .panel-10m")),new r("panel",{title:"Dades 30-minutals",service:n.service(),offering:n.offering("30m"),feature:n.feature("P4"),properties:[n.property("31"),n.property("30")],refresh_interval:120},document.querySelector(".torrecontrol .p4 .panel-30m")),new r("map",{service:n.service(),offering:n.offering("30m"),features:[n.feature("02")],properties:[],permanent_tooltips:!0,max_initial_zoom:12},document.querySelector(".torrecontrol .x02 .map")),new r("compass",{service:n.service(),offering:n.offering("1m"),feature:n.feature("02"),property:n.property("31"),refresh_interval:120},document.querySelector(".torrecontrol .x02 .compass")),new r("panel",{title:"Dades minutals",service:n.service(),offering:n.offering("1m"),feature:n.feature("02"),properties:[n.property("31"),n.property("30")],refresh_interval:15},document.querySelector(".torrecontrol .x02 .panel-10m")),new r("panel",{title:"Dades 30-minutals",service:n.service(),offering:n.offering("30m"),feature:n.feature("02"),properties:[n.property("31"),n.property("30")],refresh_interval:120},document.querySelector(".torrecontrol .x02 .panel-30m")),new r("map",{service:n.service(),offering:n.offering("30m"),features:[n.feature("03")],properties:[],permanent_tooltips:!0,max_initial_zoom:12},document.querySelector(".torrecontrol .x03 .map")),new r("compass",{service:n.service(),offering:n.offering("1m"),feature:n.feature("03"),property:n.property("31"),refresh_interval:15},document.querySelector(".torrecontrol .x03 .compass")),new r("panel",{title:"Dades minutals",service:n.service(),offering:n.offering("1m"),feature:n.feature("03"),properties:[n.property("31"),n.property("30")],refresh_interval:15},document.querySelector(".torrecontrol .x03 .panel-10m")),new r("panel",{title:"Dades 30-minutals",service:n.service(),offering:n.offering("30m"),feature:n.feature("03"),properties:[n.property("31"),n.property("30")],refresh_interval:120},document.querySelector(".torrecontrol .x03 .panel-30m"));break;case"Data Browser":var m=["01","02","03","10","P1","P3","P4","P5","P6","P7"],v=["01 - Dispensari","02 - Sirena","03 - Adossat","10 - ZAL2","P1 - ESCU","P3 - Unitat Mobil","P4 - Dic Sud","P5 - Dàrsena sud B","P6 - Contradic","P7 - Torre Control"],y=["1m","10m","30m"],d=["Minutals","10 minutals","30 minutals"],g=o("#item-template").html(),h="";for(var S in m){var w=g.replace(/\{\{id}}/g,m[S]);w=w.replace(/\{\{title}}/g,v[S]),h+=w}o(".databrowser").html(h),o(".panel-collapse").on("show.bs.collapse",function(){o(this).parent().removeClass("panel-default").addClass("panel-primary");for(var e in y){var t=this.id,i=y[e],a=d[e],s=o(this).find(".x"+i)[0];s.children.length||new r("panel",{title:a,service:n.service(),offering:n.offering(i),feature:n.feature(t),properties:[],refresh_interval:60},s)}}),o(".panel-collapse").on("hide.bs.collapse",function(){o(this).parent().removeClass("panel-primary").addClass("panel-default")}),o(".panel").hover(function(){o(this).removeClass("panel-default").addClass("panel-primary")},function(){o(this).find(".in").length||o(this).find(".collapsing").length||o(this).removeClass("panel-primary").addClass("panel-default")})}}),requirejs(["meteo"]);